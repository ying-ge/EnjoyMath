"""
ä¸ºä¸ƒå¹´çº§ä¸Šæ·»åŠ åŸºç¡€å‡ ä½•é¢˜ç›®
è¿™äº›é¢˜ç›®é€‚åˆä¸ƒå¹´çº§ä¸Šå­¦æœŸï¼Œæ¶‰åŠç‚¹ã€çº¿ã€é¢ã€è§’ç­‰åŸºç¡€å‡ ä½•æ¦‚å¿µ
"""
from models import db, Question

# ä¸ƒå¹´çº§ä¸Šçš„åŸºç¡€å‡ ä½•é¢˜ç›®
grade7_geometry_questions = [
    {
        'content': 'ä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿ',
        'options': [
            'ä¸¤ç‚¹ç¡®å®šä¸€æ¡ç›´çº¿',
            'ä¸¤æ¡ç›´çº¿ä¸€å®šç›¸äº¤',
            'çº¿æ®µå¯ä»¥æ— é™å»¶é•¿',
            'å°„çº¿æ²¡æœ‰ç«¯ç‚¹'
        ],
        'correct_answer': 0,
        'difficulty': -0.8,
        'discrimination': 0.9,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',  # æ˜ç¡®æŒ‡å®šä¸ºä¸ƒå¹´çº§ä¸Š
        'explanation': 'åŸºæœ¬äº‹å®ï¼šä¸¤ç‚¹ç¡®å®šä¸€æ¡ç›´çº¿ã€‚å¹³è¡Œçº¿ä¸ç›¸äº¤ï¼Œçº¿æ®µæœ‰ç«¯ç‚¹ï¼Œå°„çº¿æœ‰ä¸€ä¸ªç«¯ç‚¹ã€‚'
    },
    {
        'content': 'ä¸‹åˆ—è¯´æ³•é”™è¯¯çš„æ˜¯ï¼Ÿ',
        'options': [
            'è§’çš„å¤§å°ä¸è¾¹çš„é•¿çŸ­æ— å…³',
            'è§’çš„å¤§å°ä¸è§’çš„ä¸¤è¾¹å¼ å¼€ç¨‹åº¦æœ‰å…³',
            'è§’çš„å¤§å°å¯ä»¥ç”¨é‡è§’å™¨æµ‹é‡',
            'è§’çš„å¤§å°ä¸è§’çš„é¡¶ç‚¹ä½ç½®æœ‰å…³'
        ],
        'correct_answer': 3,
        'difficulty': 0.0,
        'discrimination': 0.9,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',
        'explanation': 'è§’çš„å¤§å°åªä¸è§’çš„ä¸¤è¾¹å¼ å¼€ç¨‹åº¦æœ‰å…³ï¼Œä¸è¾¹çš„é•¿çŸ­å’Œé¡¶ç‚¹ä½ç½®æ— å…³ã€‚'
    },
    {
        'content': 'ä¸€ä¸ªè§’çš„ä½™è§’æ˜¯$35Â°$ï¼Œåˆ™è¿™ä¸ªè§’æ˜¯ï¼Ÿ',
        'options': ['$55Â°$', '$45Â°$', '$65Â°$', '$35Â°$'],
        'correct_answer': 0,
        'difficulty': 0.3,
        'discrimination': 1.0,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',
        'explanation': 'å¦‚æœä¸¤ä¸ªè§’çš„å’Œæ˜¯$90Â°$ï¼Œåˆ™è¿™ä¸¤ä¸ªè§’äº’ä¸ºä½™è§’ã€‚è®¾è¿™ä¸ªè§’ä¸º$x$ï¼Œåˆ™$x + 35Â° = 90Â°$ï¼Œæ‰€ä»¥$x = 55Â°$ã€‚'
    },
    {
        'content': 'ä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿ',
        'options': [
            'ä¸¤ç‚¹ä¹‹é—´ï¼Œçº¿æ®µæœ€çŸ­',
            'ä¸¤ç‚¹ä¹‹é—´ï¼Œç›´çº¿æœ€çŸ­',
            'ä¸¤ç‚¹ä¹‹é—´ï¼Œå°„çº¿æœ€çŸ­',
            'æ— æ³•æ¯”è¾ƒ'
        ],
        'correct_answer': 0,
        'difficulty': -0.3,
        'discrimination': 0.9,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',
        'explanation': 'åŸºæœ¬äº‹å®ï¼šä¸¤ç‚¹ä¹‹é—´ï¼Œçº¿æ®µæœ€çŸ­ã€‚'
    },
    {
        'content': 'åœ¨å¹³é¢å†…ï¼Œå¦‚æœä¸¤æ¡ç›´çº¿éƒ½å¹³è¡Œäºç¬¬ä¸‰æ¡ç›´çº¿ï¼Œåˆ™è¿™ä¸¤æ¡ç›´çº¿ï¼Ÿ',
        'options': ['äº’ç›¸å¹³è¡Œ', 'ç›¸äº¤', 'é‡åˆ', 'æ— æ³•ç¡®å®š'],
        'correct_answer': 0,
        'difficulty': 0.3,
        'discrimination': 1.0,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',
        'explanation': 'å¹³è¡Œçº¿çš„ä¼ é€’æ€§ï¼šå¦‚æœä¸¤æ¡ç›´çº¿éƒ½å¹³è¡Œäºç¬¬ä¸‰æ¡ç›´çº¿ï¼Œåˆ™è¿™ä¸¤æ¡ç›´çº¿äº’ç›¸å¹³è¡Œã€‚'
    },
    {
        'content': 'ä¸€ä¸ªè§’çš„é‚»è¡¥è§’æ˜¯ï¼Ÿ',
        'options': [
            'ä¸è¿™ä¸ªè§’ç›¸é‚»ä¸”äº’è¡¥çš„è§’',
            'ä¸è¿™ä¸ªè§’ç›¸ç­‰çš„è§’',
            'ä¸è¿™ä¸ªè§’äº’ä½™çš„è§’',
            'æ— æ³•ç¡®å®š'
        ],
        'correct_answer': 0,
        'difficulty': 0.4,
        'discrimination': 1.0,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',
        'explanation': 'é‚»è¡¥è§’æ˜¯æŒ‡ä¸¤ä¸ªè§’æœ‰ä¸€æ¡å…¬å…±è¾¹ï¼Œå¦ä¸€æ¡è¾¹äº’ä¸ºåå‘å»¶é•¿çº¿ï¼Œä¸”è¿™ä¸¤ä¸ªè§’çš„å’Œæ˜¯$180Â°$ã€‚'
    },
    {
        'content': 'ä¸¤æ¡ç›´çº¿ç›¸äº¤ï¼Œå½¢æˆçš„å¯¹é¡¶è§’å…·æœ‰ä»€ä¹ˆæ€§è´¨ï¼Ÿ',
        'options': ['ç›¸ç­‰', 'äº’è¡¥', 'äº’ä½™', 'æ— æ³•ç¡®å®š'],
        'correct_answer': 0,
        'difficulty': 0.3,
        'discrimination': 1.0,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',
        'explanation': 'å¯¹é¡¶è§’ç›¸ç­‰ï¼Œè¿™æ˜¯å¹³é¢å‡ ä½•çš„åŸºæœ¬æ€§è´¨ã€‚'
    },
    {
        'content': 'å¦‚æœ$\\angle A$å’Œ$\\angle B$äº’ä¸ºè¡¥è§’ï¼Œä¸”$\\angle A = 60Â°$ï¼Œåˆ™$\\angle B = ?$',
        'options': ['$120Â°$', '$90Â°$', '$60Â°$', '$30Â°$'],
        'correct_answer': 0,
        'difficulty': -0.5,
        'discrimination': 0.9,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',
        'explanation': 'å¦‚æœä¸¤ä¸ªè§’çš„å’Œæ˜¯$180Â°$ï¼Œåˆ™è¿™ä¸¤ä¸ªè§’äº’ä¸ºè¡¥è§’ã€‚æ‰€ä»¥$\\angle B = 180Â° - 60Â° = 120Â°$ã€‚'
    },
    {
        'content': 'åœ¨åŒä¸€å¹³é¢å†…ï¼Œè¿‡ç›´çº¿å¤–ä¸€ç‚¹å¯ä»¥ä½œå‡ æ¡ç›´çº¿ä¸å·²çŸ¥ç›´çº¿å¹³è¡Œï¼Ÿ',
        'options': ['1æ¡', '0æ¡', '2æ¡', 'æ— æ•°æ¡'],
        'correct_answer': 0,
        'difficulty': 0.2,
        'discrimination': 1.0,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',
        'explanation': 'å¹³è¡Œå…¬ç†ï¼šè¿‡ç›´çº¿å¤–ä¸€ç‚¹ï¼Œæœ‰ä¸”åªæœ‰ä¸€æ¡ç›´çº¿ä¸å·²çŸ¥ç›´çº¿å¹³è¡Œã€‚'
    },
    {
        'content': 'å¦‚æœ$\\angle 1$å’Œ$\\angle 2$äº’ä¸ºä½™è§’ï¼Œ$\\angle 1 = 25Â°$ï¼Œåˆ™$\\angle 2 = ?$',
        'options': ['$65Â°$', '$55Â°$', '$75Â°$', '$45Â°$'],
        'correct_answer': 0,
        'difficulty': -0.4,
        'discrimination': 0.9,
        'knowledge_points': ['å¹³é¢å‡ ä½•'],
        'category': 'å›¾å½¢çš„è®¤è¯†',
        'semester': 'ä¸ƒå¹´çº§ä¸Š',
        'explanation': 'å¦‚æœä¸¤ä¸ªè§’çš„å’Œæ˜¯$90Â°$ï¼Œåˆ™è¿™ä¸¤ä¸ªè§’äº’ä¸ºä½™è§’ã€‚æ‰€ä»¥$\\angle 2 = 90Â° - 25Â° = 65Â°$ã€‚'
    },
]

def load_grade7_geometry():
    """åŠ è½½ä¸ƒå¹´çº§ä¸Šå‡ ä½•é¢˜ç›®åˆ°æ•°æ®åº“"""
    from app import app
    
    with app.app_context():
        added_count = 0
        skipped_count = 0
        
        for q_data in grade7_geometry_questions:
            # æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒå†…å®¹çš„é¢˜ç›®
            existing = Question.query.filter_by(content=q_data['content']).first()
            if existing:
                # å¦‚æœå­˜åœ¨ä½†å­¦æœŸä¸å¯¹ï¼Œæ›´æ–°å­¦æœŸ
                if existing.semester != 'ä¸ƒå¹´çº§ä¸Š':
                    existing.semester = 'ä¸ƒå¹´çº§ä¸Š'
                    db.session.commit()
                    print(f"æ›´æ–°é¢˜ç›®å­¦æœŸ: {q_data['content'][:30]}...")
                skipped_count += 1
                continue
            
            # åˆ›å»ºæ–°é¢˜ç›®
            question = Question(**q_data)
            db.session.add(question)
            added_count += 1
        
        db.session.commit()
        
        total_7s = Question.query.filter_by(semester='ä¸ƒå¹´çº§ä¸Š').count()
        geometry_7s = Question.query.filter(
            Question.semester == 'ä¸ƒå¹´çº§ä¸Š',
            Question.category == 'å›¾å½¢çš„è®¤è¯†'
        ).count()
        
        print("=" * 60)
        print("ğŸ“ ä¸ƒå¹´çº§ä¸Šå‡ ä½•é¢˜ç›®æ·»åŠ å®Œæˆï¼")
        print("=" * 60)
        print(f"æ–°å¢é¢˜ç›®: {added_count} é“")
        print(f"è·³è¿‡é‡å¤: {skipped_count} é“")
        print(f"ä¸ƒå¹´çº§ä¸Šæ€»é¢˜ç›®æ•°: {total_7s} é“")
        print(f"ä¸ƒå¹´çº§ä¸Šå‡ ä½•é¢˜ç›®æ•°: {geometry_7s} é“")
        print("=" * 60)
        
        return added_count, skipped_count

if __name__ == '__main__':
    load_grade7_geometry()

